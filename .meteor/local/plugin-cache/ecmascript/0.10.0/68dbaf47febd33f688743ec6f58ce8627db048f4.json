{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$1$2","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$6","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$8","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$10","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$12","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$13","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$16","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$17","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$18","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$20","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$21","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$22","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$23","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$24","visitor":{"_exploded":{},"_verified":{},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"ast":true,"babelrc":false,"sourceFileName":"client/methods.js","filename":"client/methods.js","sourceMapTarget":"client/methods.js.map","sourceMaps":true,"passPerPreset":false,"envName":"development","cwd":"/home/apprenant/Documents/php-project-front","parserOpts":{"sourceType":"module","sourceFileName":"client/methods.js","plugins":["dynamicImport","classProperties","jsx","jsx","flow","asyncGenerators","objectRestSpread","objectRestSpread","flow","asyncGenerators"]},"generatorOpts":{"filename":"client/methods.js","comments":true,"compact":false,"sourceMaps":true,"sourceMapTarget":"client/methods.js.map","sourceFileName":"client/methods.js"}},"code":"urlApi = 'http://localhost:8888';\nMeteor.methods({\n  'getProject': function (data) {\n    var headers = getHeaders();\n    HTTP.call('GET', urlApi + '/api/project/' + data.slug, {\n      params: {},\n      headers: headers\n    }, function (error, response) {\n      //var analized = [];\n      //let tools = ['PHPParallelLint','PHPLoc','PHPCPD','PHPCodeFixer'];\n      if (error) {\n        console.log(error);\n      } else {\n        if (response.data.return_code == \"FAILED\") {\n          alert('FAILED ! ');\n        } else if (response.data.return_code == \"OK\") {\n          if (response.data.return.project.analyzed !== null) {\n            console.log('fini');\n            clearInterval(data.run_every_sec); //$('#response').append(response.content);\n\n            var rlog = response.data.return.project.logs;\n            $('.loader-container').addClass('done');\n            $('.progress_loader').addClass('done');\n            $('.loader-container').hide();\n            $('.pageProject').show();\n            $('#collapseSucess > table > tbody').empty();\n            $('#collapseStats  > table > tbody').empty();\n\n            for (var i = 0; i < Object.keys(rlog.SUCCESS).length; i++) {\n              console.log(rlog.SUCCESS[i].final_output);\n              $('#collapseSucess > table > tbody').append('<tr><td>' + rlog.SUCCESS[i].final_output + '</td></tr>');\n            } //                      for (var i = 0; i < Object.keys(rlog.STATS).length; i++) {\n            //                          console.log(rlog.STATS[i].final_output);\n            //                          $('#collapseStats > table > tbody').append('<tr><td>'+rlog.STATS[i].final_output+'</td></tr>')\n            //                        }\n\n          } else {\n            $('.loader-container').show();\n          }\n        }\n      }\n    });\n  },\n  'createProject': function (data) {\n    //console.log(data);\n    var headers = getHeaders();\n    HTTP.call('POST', urlApi + '/api/project', {\n      data: {\n        repository: data.repository,\n        email: data.email\n      },\n      headers: headers\n    }, function (error, response) {\n      if (error) {\n        console.log(error);\n      } else {\n        //console.log(response.data);\n        if (response.data.return_code == \"OK\") {\n          Router.go(\"/project/\" + response.data.return.project_saved.slug);\n        } else if (response.data.return_code == \"FAILED\") {\n          alert('error ! ');\n        }\n      }\n    });\n  }\n});\nsignUp = function (data) {\n  //console.log(data);\n  HTTP.call('POST', urlApi + '/api/register/', {\n    data: {\n      name: data.name,\n      email: data.email,\n      password: data.password,\n      c_password: data.c_password\n    }\n  }, function (error, response) {\n    if (error) {\n      var textError = \"\";\n      console.log(response.data);\n\n      for (var error in meteorBabelHelpers.sanitizeForInObject(response.data.error)) {\n        textError += \"<p>\" + response.data.error[error] + \"</p>\";\n      }\n\n      ;\n      $('.error').html(textError);\n      $('.error').show();\n    } else {\n      sessionStorage.setItem(\"name\", \"vert\");\n      sessionStorage.setItem(\"token\", response.data.success.token);\n      Router.go('home');\n    }\n  });\n}, signIn = function (data) {\n  //console.log(data);\n  HTTP.call('POST', 'urlApi/api/login/', {\n    data: {\n      email: data.email,\n      password: data.password\n    }\n  }, function (error, response) {\n    if (error) {\n      $('#okCredentials').hide();\n      $('#errorCredentials').show();\n      $('#password').val('');\n    } else {\n      sessionStorage.setItem(\"name\", \"vert\");\n      sessionStorage.setItem(\"token\", response.data.success.token);\n      displayLogin();\n      Router.go('/?successLogIn');\n    }\n  });\n};\n\ngetHeaders = function () {\n  var name = sessionStorage.getItem(\"name\");\n  var token = sessionStorage.getItem(\"token\");\n  var headers = {};\n\n  if (token != null) {\n    headers = {\n      \"Accept\": 'application/json',\n      \"Authorization\": 'Bearer ' + token\n    };\n  }\n\n  return headers;\n};\n\ndisconnect = function () {\n  var headers = getHeaders();\n  HTTP.call('POST', 'urlApi/api/logout/', {\n    headers: headers\n  }, function (error, response) {\n    if (error) {\n      sessionStorage.removeItem('name');\n      sessionStorage.removeItem('token');\n    } else {\n      sessionStorage.removeItem('name');\n      sessionStorage.removeItem('token');\n    }\n  });\n};\n\ndisplayLogin = function () {\n  var name = sessionStorage.getItem(\"name\");\n  var token = sessionStorage.getItem(\"token\");\n\n  if (name == null) {\n    $('#login').html('<a class=\"btn btn-primary\" href=\"/sign-in\">Sign in</a> <a class=\"btn btn-primary\" href=\"/sign-up\">Sign up</a>');\n    $('#myProjects').hide();\n  } else {\n    $('#login').html(name + '<a class=\"btn btn-primary\" href=\"/disconnect\">Disconnect</a>');\n    $('#myProjects').show();\n  }\n};\n\nlistMyProjects = function () {\n  var headers = getHeaders();\n  console.log(headers);\n  HTTP.call('GET', 'http://localhost:8888/api/user-projects/', {\n    data: {},\n    headers: headers\n  }, function (error, response) {\n    if (error) {\n      console.log(error);\n    } else {\n      console.log(response.data);\n\n      if (response.data.count_result > 0) {\n        for (var project in meteorBabelHelpers.sanitizeForInObject(response.data.return)) {\n          console.log(response.data.return[project]);\n          var slug = '/project/' + response.data.return[project].slug;\n          var date = new Date(response.data.return[project].created_at);\n          var optionsDate = {\n            year: \"numeric\",\n            month: \"numeric\",\n            day: \"numeric\"\n          };\n          var dateFormat = date.toLocaleDateString(\"en-GB\") + ' ' + date.toLocaleTimeString('fr-FR');\n          var urlRepo = response.data.return[project].repository_url;\n          var html = '<div class=\"project\"><div style=\"margin-bottom: 5px;\"><i class=\"fa fa-link\"></i> ' + urlRepo + '</div><div><i class=\"fa fa-calendar\"></i> ' + dateFormat + '</div><div class=\"goToTest\"><a href=\"' + slug + '\" class=\"btn-primary btn\">Go to test</a></div></div>';\n          $('.myProjects').append(html);\n        }\n\n        ;\n      } else {\n        var html = '<div class=\"project\">You have not scanned projects yet.</div>';\n        $('.myProjects').append(html);\n      }\n    }\n  });\n};","map":{"version":3,"sources":["client/methods.js"],"names":["urlApi","Meteor","methods","data","headers","getHeaders","HTTP","call","slug","params","error","response","console","log","return_code","alert","return","project","analyzed","clearInterval","run_every_sec","rlog","logs","$","addClass","hide","show","empty","i","Object","keys","SUCCESS","length","final_output","append","repository","email","Router","go","project_saved","signUp","name","password","c_password","textError","html","sessionStorage","setItem","success","token","signIn","val","displayLogin","getItem","disconnect","removeItem","listMyProjects","count_result","date","Date","created_at","optionsDate","year","month","day","dateFormat","toLocaleDateString","toLocaleTimeString","urlRepo","repository_url"],"mappings":"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","file":"client/methods.js.map","sourcesContent":["urlApi = 'http://localhost:8888';\n\nMeteor.methods({\n    'getProject': function(data){\n      var headers = getHeaders();\n\n      HTTP.call( 'GET', urlApi+'/api/project/'+data.slug, {\n        params: {},\n        headers: headers\n      }, function( error, response ) {\n          //var analized = [];\n          //let tools = ['PHPParallelLint','PHPLoc','PHPCPD','PHPCodeFixer'];\n        if ( error ) {\n          console.log( error );\n        } else {\n            if(response.data.return_code == \"FAILED\"){\n                alert('FAILED ! ');\n            } else if(response.data.return_code == \"OK\"){\n\n                  if(response.data.return.project.analyzed !== null){\n\n                      console.log('fini');\n                      clearInterval(data.run_every_sec);\n\n                      //$('#response').append(response.content);\n\n                      var rlog = response.data.return.project.logs;\n\n                      $('.loader-container').addClass('done');\n                      $('.progress_loader').addClass('done');\n                      $('.loader-container').hide();\n                      $('.pageProject').show();\n\n                      $('#collapseSucess > table > tbody').empty();\n                      $('#collapseStats  > table > tbody').empty();\n                      for (var i = 0; i < Object.keys(rlog.SUCCESS).length; i++) {\n                          console.log(rlog.SUCCESS[i].final_output);\n                          $('#collapseSucess > table > tbody').append('<tr><td>'+rlog.SUCCESS[i].final_output+'</td></tr>')\n                        }\n//                      for (var i = 0; i < Object.keys(rlog.STATS).length; i++) {\n//                          console.log(rlog.STATS[i].final_output);\n//                          $('#collapseStats > table > tbody').append('<tr><td>'+rlog.STATS[i].final_output+'</td></tr>')\n//                        }\n\n                  }else{\n                    $('.loader-container').show();\n                  }\n            }\n        }\n      });\n    },\n\n    'createProject': function(data){\n        //console.log(data);\n        var headers = getHeaders();\n\n        HTTP.call( 'POST', urlApi+'/api/project', {\n            data: { repository: data.repository, email: data.email },\n            headers: headers\n        }, function( error, response ) {\n            if ( error ) {\n                console.log( error );\n            } else {\n                //console.log(response.data);\n                if(response.data.return_code == \"OK\"){\n                    Router.go(\"/project/\"+response.data.return.project_saved.slug);\n                }else if(response.data.return_code == \"FAILED\"){\n                    alert('error ! ');\n                }\n\n            }\n        });\n    }\n});\n\nsignUp = function(data){\n    //console.log(data);\n    HTTP.call( 'POST', urlApi+'/api/register/', {\n        data: { name: data.name, email: data.email, password: data.password, c_password: data.c_password }\n    }, function( error, response ) {\n        if ( error ) {\n            var textError = \"\";\n            console.log(response.data);\n            for(var error in response.data.error){\n\n              textError += \"<p>\"+response.data.error[error]+\"</p>\";\n            };\n            $('.error').html(textError);\n            $('.error').show();\n        } else {\n            sessionStorage.setItem(\"name\",\"vert\");\n            sessionStorage.setItem(\"token\",response.data.success.token);\n            Router.go('home');\n        }\n    });\n},\n\nsignIn = function(data){\n    //console.log(data);\n    HTTP.call( 'POST', 'urlApi/api/login/', {\n        data: { email: data.email, password: data.password }\n    }, function( error, response ) {\n        if ( error ) {\n            $('#okCredentials').hide();\n            $('#errorCredentials').show();\n            $('#password').val('');\n        } else {\n            sessionStorage.setItem(\"name\",\"vert\");\n            sessionStorage.setItem(\"token\",response.data.success.token);\n            displayLogin();\n            Router.go('/?successLogIn')\n        }\n    });\n}\n\ngetHeaders = function(){\n    var name = sessionStorage.getItem(\"name\");\n    var token = sessionStorage.getItem(\"token\");\n    var headers = {};\n\n    if(token != null) {\n        headers = {\n          \"Accept\": 'application/json',\n          \"Authorization\": 'Bearer '+token\n        }\n    }\n\n    return headers;\n}\n\ndisconnect = function(){\n  var headers = getHeaders();\n\n  HTTP.call( 'POST', 'urlApi/api/logout/', {\n      headers: headers\n  }, function( error, response ) {\n      if ( error ) {\n          sessionStorage.removeItem('name');\n          sessionStorage.removeItem('token');\n      } else {\n          sessionStorage.removeItem('name');\n          sessionStorage.removeItem('token');\n      }\n  });\n}\n\ndisplayLogin = function(){\n  var name = sessionStorage.getItem(\"name\");\n  var token = sessionStorage.getItem(\"token\");\n\n  if(name == null) {\n    $('#login').html('<a class=\"btn btn-primary\" href=\"/sign-in\">Sign in</a> <a class=\"btn btn-primary\" href=\"/sign-up\">Sign up</a>');\n    $('#myProjects').hide();\n  }\n  else {\n    $('#login').html(name+'<a class=\"btn btn-primary\" href=\"/disconnect\">Disconnect</a>');\n    $('#myProjects').show();\n  }\n}\n\nlistMyProjects = function(){\n  var headers = getHeaders();\n\n  console.log(headers);\n\n  HTTP.call( 'GET', 'http://localhost:8888/api/user-projects/',{\n      data: {},\n      headers: headers\n  }, function( error, response ) {\n      if ( error ) {\n          console.log(error);\n      } else {\n        console.log(response.data);\n        if(response.data.count_result > 0){\n          for(var project in response.data.return){\n              console.log(response.data.return[project])\n              var slug = '/project/'+response.data.return[project].slug;\n              var date = new Date(response.data.return[project].created_at);\n              var optionsDate = {year: \"numeric\", month: \"numeric\", day: \"numeric\"};\n              var dateFormat = date.toLocaleDateString(\"en-GB\")+' '+date.toLocaleTimeString('fr-FR');\n              var urlRepo = response.data.return[project].repository_url;\n              var html = '<div class=\"project\"><div style=\"margin-bottom: 5px;\"><i class=\"fa fa-link\"></i> '+urlRepo+'</div><div><i class=\"fa fa-calendar\"></i> '+dateFormat+'</div><div class=\"goToTest\"><a href=\"'+slug+'\" class=\"btn-primary btn\">Go to test</a></div></div>';\n              $('.myProjects').append(html);\n          };\n        }\n        else {\n          var html = '<div class=\"project\">You have not scanned projects yet.</div>';\n          $('.myProjects').append(html);\n        }\n\n      }\n  });\n}\n"]},"hash":"68dbaf47febd33f688743ec6f58ce8627db048f4"}
